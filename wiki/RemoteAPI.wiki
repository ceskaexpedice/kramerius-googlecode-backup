#summary Remote API
<wiki:toc max_depth="1" />

=API=
Verze 4.6 přineslo možnost třetím stranám využít vzdálené API pro: 

 * Správu procesů
 * Repliaci dat

API je verzováno a je připojeno na kontextu ../search/api/v4.6. Vyžaduje autentizovanou HTTP session, pokud není session autentizovaná, je možno se 
autentizovat pomocí protokolu BASIC. Nutno podotknout, že je vhodné tuto autentizaci používat pouze v kombinaci se zapnutým HTTPS protokolem. 


==Správa procesů==
Správa procesů umožňuje základní operace 

 * Získávat výpisy procesů  
 * Plánovat nový proces
 * Získávat informace o procesu (Stav, čas spuštění, dávkový stav..) 
 * Zastavit proces
 * Smazat proces z procesní databáze
 * Získat logy procesů


===Výpisy procesů===
Prostý výpis procesů 
{{{
    GET https://xxx.xxx.xxx.xxx/seach/api/v4.6/processes/
}}}
Výstupem je JSON pole 
{{{
[
    {
        "uuid":"90b8a07a-14f5-4817-a47f-16f2b88c2724",
        "pid":"20227",
        "def":"mock",
        "state":"FINISHED",
        "batchState":"NO_BATCH",
        "name":"Jmeno procesu mock..",
        "started":"02/07/2012 09:15:31:600",
        "planned":"02/07/2012 09:15:23:570",
        "userid":"krameriusAdmin",
        "userFirstname":"kramerius",
        "userSurname":"admin"
    },
    {
        "uuid":"ed38ac05-a90e-41b5-b922-31b7b7fa44e6",
        "pid":"17900",
        "def":"replikator_periodicals",
        "state":"FINISHED",
        ...
    }
]
}}}

===Filtr===
Filtrování výsledků je možné pomocí standardních atritubutů dotazu. Tedy dotaz na procesy spuštěné ukončené stavem  FAILED by vypadal následovně:
{{{
    GET https://xxx.xxx.xxx.xxx/seach/api/v4.6/processes?state=FAILED
}}}
Výpis procesů vypadá stejně jako v předchozím případě.

Pozn.:Filtrovat lze dle všech parametrů json objektu krom datumových. 

===Velikost výsledného pole===
Velikost vraceného pole je implicitně nastavena na hodnotu 25. Je možno to změnit parametrem resultSize. Dotaz vypadá následovně:
{{{
    GET https://xxx.xxx.xxx.xxx/seach/api/v4.6/processes?resultSize=2
}}}

===Offset===
Offset lze měnít parametrem offset 
{{{
    GET https://xxx.xxx.xxx.xxx/seach/api/v4.6/processes?offset=100
}}}

===Plánování nového procesu===
Nejjednodušší je plánování nového procesu bez parametrů
{{{
    POST https://xxx.xxx.xxx.xxx/seach/api/processes?def=mock
}}}
Parametr def určuje identifikátor plánovaného procesu. Výsledkem je popis naplánovaného objektu
{{{
    {
        "uuid":"2d7ead5b-daee-4fa4-b967-ffff57769e6d",
        "def":"mock",
        "state":"PLANNED",
        "batchState":"NO_BATCH",
        "planned":"10/22/2012 09:39:16:961"
    }
}}}

