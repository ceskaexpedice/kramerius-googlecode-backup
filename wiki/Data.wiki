#summary Datový model
<wiki:toc max_depth="1" />
Digitální objekty systému Kramerius 4 jsou uloženy v úložišti Fedora Commons ve formátu FOXML 1.1. Popis tohoto formátu je zde: [https://wiki.duraspace.org/display/FCR30/Introduction+to+FOXML].

Kramerius 4 používá zobecněný datový model vycházející z návrhu společnosti Qbizm vytvořeném v rámci proof of concept převodu dat ze struktury Kramerius 3 do úložiště Fedora (dále POC). Dokumentace tohoto původního návrhu je k dispozici zde: [http://digit.lib.cas.cz/index.php?cat=fedora].

=Hierarchie digitálních objektů=

Dokumenty v původním formátu DTD Kramerius 3 mají hierarchickou stromovou strukturu (typicky monografie/svazek/stránka nebo periodikum/ročník/číslo/stránka). Úložiště Fedora není hierarchické. Každému uzlu původní stromové struktury odpovídá digitální objekt FOXML s příslušným content modelem, jednotlivé objekty jsou do stromové struktury propojeny pomocí RDF vazeb definovaných v datovém streamu RELS-EXT.

==Content modely==

Datová struktura, vycházející z formátu dat Kramerius 3, předpokládá následující content modely:

  * monograph
  * monographunit
  * page
  * internalpart
  * periodical
  * periodicalvolume
  * periodicalitem

Definiční soubory těchto modelů jsou součástí  [http://digit.lib.cas.cz/index.php?cat=fedora POC], aktuální verze jsou součástí balíčku installation v sekci downloads, případně v SVN.

Modely monograph a periodical jsou přiřazeny digitálním objektům, které tvoří kořen stromové struktury jednotlivých dokumentů. Při případném rozšiřování datové struktury Kramerius4 o nové typy objektů je třeba pro každý nový typ definovat odpovídající content model a nový kořenový model přidat do seznamu kořenových modelů, definovaných konfiguračním parametrem fedora.topLevelModels (viz [Instalace])


==RDF vazby==

  hasModel (xmlns:fedora-model="info:fedora/fedora-system:def/model#")
  
  hasUnit (xmlns:kramerius="http://www.nsdl.org/ontologies/relationships#")

  hasPage (xmlns:kramerius="http://www.nsdl.org/ontologies/relationships#")

  hasVolume (xmlns:kramerius="http://www.nsdl.org/ontologies/relationships#")

  hasItem (xmlns:kramerius="http://www.nsdl.org/ontologies/relationships#")

  hasIntCompPart (xmlns:kramerius="http://www.nsdl.org/ontologies/relationships#")

  isOnPage ()

  hasDonator (xmlns:kramerius="http://www.nsdl.org/ontologies/relationships#") 

  contract (xmlns:kramerius="http://www.nsdl.org/ontologies/relationships#") (literal)

  handle (xmlns:kramerius="http://www.nsdl.org/ontologies/relationships#") (literal)

  policy (xmlns:kramerius="http://www.nsdl.org/ontologies/relationships#") (literal)

  itemId (xmlns:oai="http://www.openarchives.org/OAI/2.0/")

=Identifikátor digitálních objektů=
Každý digitální objekt systému Kramerius 4 má jednoznačný identifikátor UUID, generovaný stejným algoritmem, který byl použit v systému Kramerius 3 (tedy UUID version 1, viz [http://tools.ietf.org/html/rfc4122 RFC4122]), doplněný prefixem uuid:, například uuid:0eaa6730-9068-11dd-97de-000d606f5dc6
 

=Datové streamy=
Objekty používají datové streamy navržené v rámci POC, povinné streamy jsou DC, BIBLIO_MODS a RELS_EXT. 

Objekty, které obsahují binární stream IMG_FULL s obrázkem v plném rozlišení, jsou oproti POC rozšířeny o další binární stream IMG_THUMB s náhledem obrázku (ve formátu JPG s nízkým rozlišením) pro zobrazení v souhrnných přehledech.

Další rozšíření oproti POC je standardní datový stream POLICY, který obsahuje přístupová  práva ve formátu XACML - použit pouze u objektů s omezeným přístupem.

Donátor bude řešen jako vazba v RELS-EXT na speciální FO-XML objekt, který bude obsahovat i další údaje o donátorovi.  Tento způsob umožňuje informace automaticky indexovat v RI a navíc je možno snáze přidávat nové donátory. Donátora je nutné extrahovat z pole creator  (změna v konverzním programu).

=Rozšiřování modelu o nové typy dokumentů=
Digitální objekty v systému Kramerius 4 tvoří obecnou stromovou strukturu s vazbami definovanými  pomocí RDF vazeb, které jsou potomky vazeb fedora:hasPart a fedora:isPartOf. 

Systém lze libovolně rozšiřovat o nové typy objektů přidáním příslušného objektu cmodel s povinnými datovými streamy DC, BIBLIO_MODS a RELS_EXT.   


=Přehled obsahu streamů DC a RELS_EXT pro jednotlivé typy objektů=

==monograph==

RELS_EXT:
  hasModel
  
  hasUnit

  hasPage

  hasIntCompPart

  donator

  contract (literal)

  handle (literal)

  policy (literal)

DC:
  title

  creator

  publisher

  contributor

  identifier - uuid

  identifier - contract

  identifier - isbn / extid

  identifier - handle

  subject - ddc

  subject - udc

  description

  date

  type
  
  language

  rights


==monographUnit==

RELS_EXT:
  hasModel

  hasPage

  hasIntCompPart

  contract (literal)

  handle (literal)

  policy (literal)

DC:
  title

  creator

  publisher
 
  contributor

  identifier - uuid

  identifier - contract

  identifier - handle

  type

  rights

IMG_FULL, IMG_THUMB, IMG_FULL_ADM, TEXT_OCR, TEXT_OCR_ADM


==monograph internalpart==

RELS_EXT: 
  hasModel

  isOnPage

  handle (literal)

  policy (literal)

DC:
  title

  creator

  contributor

  identifier - uuid

  identifier - handle

  type

  rights


==monograph page==

RELS_EXT: 
  hasModel

  file (literal)

  handle (literal)

  policy (literal)

DC:
  title

  identifier - uuid

  identifier - handle

  type

  rights

IMG_FULL, IMG_THUMB, IMG_FULL_ADM, TEXT_OCR, TEXT_OCR_ADM


==periodical==

RELS_EXT:
  hasModel

  hasVolume

  donator

  handle (literal)

  policy (literal)

DC:
  title

  creator
  
  publisher

  contributor

  identifier - uuid

  identifier - issn

  identifier - handle

  subject - ddc

  subject - udc

  description

  date

  type

  language

  rights


==periodicalvolume==

RELS_EXT:
  hasModel

  hasItem

  hasPage

  hasIntCompPart

  contract (literal)

  handle (literal)

  policy (literal)

DC:
  title

  creator

  publisher

  contributor

  identifier - uuid

  identifier - contract

  identifier - handle

  description

  date

  type

  rights


==periodicalitem==

RELS_EXT:
  hasModel

  hasPage

  hasIntCompPart

  contract (literal)

  handle (literal)

  policy (literal)

DC:
  title

  creator

  publisher

  contributor

  identifier - uuid

  identifier - contract

  identifier - handle

  description

  date

  type
 
  rights

IMG_FULL, IMG_THUMB, IMG_FULL_ADM, TEXT_OCR, TEXT_OCR_ADM


==periodical internalpart==

RELS_EXT: 
  hasModel

  isOnPage

  handle (literal)

  policy (literal)

DC:
  title

  creator

  contributor
  
  identifier - uuid

  identifier - handle

  type

  rights


==periodical page==

RELS_EXT: 
  hasModel

  file (literal)

  handle (literal)

  policy (literal)

DC:
  title

  identifier - uuid

  identifier - handle

  type

  rights

IMG_FULL, IMG_THUMB, IMG_FULL_ADM, TEXT_OCR, TEXT_OCR_ADM
 