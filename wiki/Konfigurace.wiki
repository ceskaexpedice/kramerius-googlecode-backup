#summary Konfigurační properties K4

Konfigurační soubory K4 využívají rozšířené syntaxe properties podporované použitou knihovnou Apache commons-configuration.  Soubory jsou uspořádány ve dvoustupňové hierarchii: Základní sdílené properties jsou v souboru configuration.properties, jednotlivé plugin moduly externích procesů je pak rozšiřují ve svých konfiguračních souborech (např. migration.properties, indexer.properties).

Defaultní hodnoty properties (viz níže) jsou definovány uvnitř aplikačního archivu search.war. Hodnoty je možno předefinovat jejich uvedením ve stejně pojmenovaném souboru umístěném v adresáři $USER_HOME/.kramerius4. Tyto konfigurační soubory (prázdné) jsou vytvořeny automaticky při prvním spuštění K4, resp. příslušného externího procesu.


=configuration.properties=
{{{
#Global properties for kramerius 4

## index access
_fedoraTomcatHost=http://localhost:8080
indexerHost=${_fedoraTomcatHost}/fedoragsearch
solrHost=${_fedoraTomcatHost}/solr

## list of top level content model names, comma separated
fedora.topLevelModels=monograph,periodical

## fedora access
fedoraHost=${_fedoraTomcatHost}/fedora
fedoraUser=fedoraAdmin
fedoraPass=fedoraAdmin

## thumbnail images
scaledHeight=128

## regular expressions for IP addresses allowed to access private documents.
## list of expressions separated by ||
accessPatterns=127.*

## max. number of pages in generated PDF documents
generatePdfMaxRange=20



## external configuration file name
_ext_configuration_file_name=configuration.properties
}}}

=migration.properties=
{{{
# mac address for uuid generator
uuid.mac=00:1b:63:bd:97:ba

# connection to Kramerius 3 postgres db (replication source) 
k3.db.driver=org.postgresql.Driver
k3.db.url=jdbc:postgresql://localhost:5432/kramerius
k3.db.user=kramerius
k3.db.password=f8TasR

# URL of Kramerius 3 (replication source)
k3.replication.url=http://localhost:8080/kramerius/

# replication institution 
k3.replication.sigla=ABA002
k3.replication.login=replication
k3.replication.password=f29fabe637a472bf5222b12a0bc5df77

# working directory for repliaction and conversion
migration.directory=${sys:user.home}/.kramerius4/replication

# list of periodicasl IDs to replicate
migration.periodicals= ${sys:user.home}/.kramerius4/periodicals.txt

# list of monographs IDs to replicate
migration.monographs=${sys:user.home}/.kramerius4/monographs.txt

# number of characters used as contractNumber in image file names (5 at NKP, 18 at KNAV)
contractNo.length=5

# connection to fedora repository (replication target)
ingest.url=${fedoraHost}
ingest.user=${fedoraUser}
ingest.password=${fedoraPass}

# external configuration file name
_ext_configuration_file_name=migration.properties

}}}


=indexer.properties=
{{{
# absolutni cesta k adresari solr indexu 
IndexDir=${sys:user.home}/fedora/solr/data/index

#sablona XSLT pro indexaci
UpdateIndexDocXslt=KrameriusFoxmlToSolr

#URL solr
IndexBase=${solrHost}

# repository
FedoraSoap= ${fedoraHost}/services
FedoraResourceIndex= ${fedoraHost}/risearch
FedoraUser= ${fedoraUser}
FedoraPass= ${fedoraPass}
FedoraVersion= 3.1
RepositoryName=Kramerius

#indexed MIME types
MimeTypes= text/plain text/html application/pdf


FOXMLFormat=info:fedora/fedora-system:FOXML-1.1

# Jmeno externiho konfiguracniho souboru
_ext_configuration_file_name=indexer.properties
}}}