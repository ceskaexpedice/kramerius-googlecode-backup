#summary Přehled struktury aplikace pro vývojáře

= Úvod =

Kramerius 4 je standardní webová aplikace v jazyce Java odpovídající specifikacím Servlet API 2.4 a Java Server Pages 1.1. Aplikace je definována v hlavním modulu [http://code.google.com/p/kramerius/source/browse/#svn%2Ftrunk%2Fsearch  search].

*Způsob dokumentace projektu*
  * Popis obecné struktury aplikace K4
  * Popis jednotlivých modulů a informace o jejich účelu 
  * Popis hlavních tříd, které mají dokumentované public API 
  * Popis, jak postupovat, když bude někdo chtít přispívat do kódu

= Přehled modulů =

http://kramerius.googlecode.com/svn/wiki/Modules.png

Kromě hlavního modulu aplikace [http://code.google.com/p/kramerius/source/browse/#svn%2Ftrunk%2Fsearch  search] je systém Kramerius 4 tvořen následujícími moduly:

=== Společné moduly===
  
  * common - služby sdílené jednotlivými moduly
    * [http://code.google.com/p/kramerius/source/browse/trunk/common/src/main/java/cz/incad/kramerius/FedoraAccess.java FedoraAccess] - přístup ke službám REST API fedora commons
    * [http://code.google.com/p/kramerius/source/browse/trunk/common/src/main/java/cz/incad/kramerius/SolrAccess.java  SolrAccess] - přístup ke službám indexu SOLR
    * [http://code.google.com/p/kramerius/source/browse/trunk/common/src/main/java/cz/incad/kramerius/#kramerius%2Fdatabase database] - správa verzí databáze K4
    * [http://code.google.com/p/kramerius/source/browse/trunk/common/src/main/java/cz/incad/kramerius/#kramerius%2Fimaging imaging] - podpora formátu DeepZoom
    * [http://code.google.com/p/kramerius/source/browse/trunk/common/src/main/java/cz/incad/kramerius/#kramerius%2Fpdf pdf] - online generování PDF
    * [http://code.google.com/p/kramerius/source/browse/trunk/common/src/main/java/cz/incad/kramerius/#kramerius%2Fprinting printing] - tisková fronta na serveru
    * [http://code.google.com/p/kramerius/source/browse/trunk/common/src/main/java/cz/incad/kramerius/#kramerius%2Fprocesses processes] - API pro správu administrátorských procesů  ([RemoteAPI] - Popis remote API k procesům, [Processes] - Popis implemtenace procesů)  
    * [http://code.google.com/p/kramerius/source/browse/trunk/common/src/main/java/cz/incad/kramerius/#kramerius%2Fsecurity security] - API pro správu přístupových práv ([Prava] - Popis práv, [PravaStreams] - Rozšíření práv o podporu streamů)
    * [http://code.google.com/p/kramerius/source/browse/trunk/common/src/main/java/cz/incad/kramerius/#kramerius%2Fservice service] - ostatní sdílené služby
    * [http://code.google.com/p/kramerius/source/browse/trunk/common/src/main/java/cz/incad/kramerius/#kramerius%2Fvirtualcollections virtualcollections] - podpora virtuálních sbírek
  * fedora-api - mapování SOAP API-M fedora commons
  * security-core - společné služby správy uživatelů a rolí			

=== Moduly administrátorských procesů===

  * import - třídy pro spouštění importních procesů z formátu K3 a FOXML
  * import-mets - konvertor z nové specifikace formátu METS		
  * indexer - proces indexace dokumentů v indexu SOLR			
  * static-export - export dokumentů ve formátu PDF na CD a DVD

Podpůrné moduly procesů import a import-mets:

  * import-cmd-tool - konvertor z formátu K3, generátor FOXML
  * import-jaxb-dc - JAXB mapování schematu Dublin Core	
  * import-jaxb-mets - JAXB mapování schematu METS
  * import-jaxb-mods - JAXB mapování schematu MODS	
  * import-jaxb-periodical - JAXB mapování schematu periodik Kramerius3 	
  * import-jaxb	- JAXB mapování schematu monografií Kramerius3	


=== Moduly externích administrátorských aplikací===

  * editor - grafický editor pořadí součástí v datastreamu RELS-EXT 
  * rightseditor - editor uživatelských účtů  využitelný při použití databázového security realmu pro aplikační servery bez vlastní správy uživatelů (Tomcat)


= Build a závislosti =

Kramerius4 využívá standardní buildovací systém [http://maven.apache.org Maven]. Základní deskriptor [http://code.google.com/p/kramerius/source/browse/trunk/pom.xml POM] aplikace je v kořenovém adresáři projektu, slouží zároveň jako multi-module POM i parent POM pro jednotlivé moduly systému.

Distribuční archiv search.war lze vytvořit příkazem `mvn install` v kořenovém adresáři projektu. Potřebné knihovny závislostí jsou automaticky staženy z centrálního úložiště systému Maven, s výjimkou následujících  knihoven:

  * djvuframe-0.8.09
  * javadjvu-0.8.09
  * aplikator-1.0
  * jai_core-1.1.3
  * jai_imageio-1.1
  * gwt-dnd-3.0.1
  * gwt-servlet-2.0.0  

Tyto knihovny je třeba před prvním buildem aplikace manuálně nainstalovat do lokálního úložiště maven. Soubory knihoven  jsou k dispozici v sekci Downloads.

= Programátorské konvence =

Přehled programátorských konvencí, používaných při vývoji sytsému Kramerius 4, je na stránce wiki StyleGuidelines .