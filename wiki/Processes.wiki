#summary Programers support documents
<wiki:toc max_depth="1" />

=O=
Článek popisuje možnosti definice procesů v systému K4.

=Procesy=
Procesy v systému K4 jsou definovány dvojí, jednodužší bez uživatelského vstupu a složitější, s možností definice spouštěných parametrů přes 
webové rozhraní.
 

==Procesy bez uživatelského vstupu==
Základní procesy v K4 jsou jednoduché java programy se standardní metodou main. Vytvoření takového procesu spočívá ve vytvoření třídy a zavedení 
příslušného elementu do souboru lp.xml. 
{{{
package org.someorg;

public class TestSimpleProcess {
    
    public static main(String[] args) {
        ....
    }
} 
}}}
{{{
<processes>
    <process>
        <id>testsimpleprocess</id>
        <description>Testik process</description>
        <mainClass>org.someorg.TestSimpleProcess</mainClass>
        <standardOs>lrOut</standardOs>
        <errOs>lrErr</errOs>
    </process>
</processes>
}}}

Takto definovaný proces je možno rovnou spustit přes RESTful API nebo pomocí staršího přístupu, přes lr servlet. 

==Procesy s uživatelským vstupem==
Tato možnost byla přidána až v souvislosti s Issue 114 a je přítomna od verze 4.6. Spouštěná metoda je zde určena anotací 
`Process` a parametry metody anotacemi `ParameterName` z balíčku `cz.incad.kramerius.processes.annotations`. 

{{{
package org.someorg;

public class TestSimpleProcess2 {

    @DefaultParameterValue("user")
    public static final String DEFAULT_USER="pan_nikdo";
    
    
    @Process    
    public static void process(@ParamName("user")String user, @ParamName("email")String email, @ParamName("serverFolder")File serverFolder) {
        ...
    }
} 
}}}

Anotace `@Process` určí metodu, kterou plánovač spustí, anotace `@ParamName` pak definuje formální jméno položky získané z formuláře od uživatele. 
Pokud taková položka nebyla od uživatele získána, algoritmus zkoumá jestli není definována implicitní hodnota určená parametrem @DefaultParameterValue.

 